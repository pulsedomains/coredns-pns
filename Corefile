# This section enables DNS lookups for all domains on PNS
. {
  rewrite stop {
    # This rewrites any requests for *.pls.to domains to *.pls internally
    # prior to being processed by the main PNS resolver.
    name regex (.*)\.pls\.to {1}.pls
    answer name (.*)\.pls {1}.pls.to
  }
  pns {
    # connection is the connection to an PulseChain node.  It is *highly*
    # recommended that a local node is used, as remote connections can
    # cause DNS requests to time out.
    # This can be either a path to an IPC socket or a URL to a JSON-RPC
    # endpoint.
    connection http://127.0.0.1:8575

    # plslinknameservers are the names of the nameservers that serve
    # PlsLink domains.  This will usually be the name of this server,
    # plus potentially one or more others.
    plslinknameservers ns1.pls.to

    # ipfsgatewaya is the address of an PNS-enabled IPFS gateway.
    # This value is returned when a request for an A record of an Plslink
    # domain is received and the domain has a contenthash record in PNS but
    # no A record.  Multiple values can be supplied, separated by a space,
    # in which case all records will be returned.
    ipfsgatewaya 127.0.0.1

    # ipfsgatewayaaaa is the address of an PNS-enabled IPFS gateway.
    # This value is returned when a request for an AAAA record of an Plslink
    # domain is received and the domain has a contenthash record in PNS but
    # no A record.  Multiple values can be supplied, separated by a space,
    # in which case all records will be returned.
    ipfsgatewayaaaa 127.0.0.1
  }

  # This enables DNS forwarding.  It should only be enabled if this DNS server
  # is not exposed to the internet, otherwise it becomes an open DNS server and
  # will be flooded with attack packets.
  forward . 8.8.8.8

  errors
}